(function(g){g.fn.orbit=function(a){a=g.extend({animation:"fade",animationSpeed:800,advanceSpeed:4E3,startClockOnMouseOut:true,startClockOnMouseOutAfter:3E3,directionalNav:true,captions:true,captionAnimationSpeed:800,timer:false},a);return this.each(function(){function o(c){function f(){e.eq(h).css({"z-index":1});p=false}if(!p){p=true;var h=b,i=c;if(c=="next"){b++;if(b==q)b=0}else if(c=="prev"){b--;if(b<0)b=q-1}else{b=c;if(h<b)i="prev";else if(h>b)i="next"}if(a.animation=="fade"){e.eq(h).css({"z-index":2});
e.eq(b).css({opacity:0,"z-index":3}).animate({opacity:1},a.animationSpeed,f);a.captions&&l()}if(a.animation=="horizontal-slide"){e.eq(h).css({"z-index":2});i=="next"&&e.eq(b).css({left:r,"z-index":3}).animate({left:0},a.animationSpeed,f);i=="prev"&&e.eq(b).css({left:-r,"z-index":3}).animate({left:0},a.animationSpeed,f);a.captions&&l()}if(a.animation=="vertical-slide"){e.eq(h).css({"z-index":2});i=="prev"&&e.eq(b).css({top:s,"z-index":3}).animate({top:0},a.animationSpeed,f);i=="next"&&e.eq(b).css({top:-s,
"z-index":3}).animate({top:0},a.animationSpeed,f);a.captions&&l()}}}var b=0,q=0,r,s,p,d=g(this).addClass("orbit"),e=d.children("img");e.each(function(){var c=g(this),f=c.width();c=c.height();if(f>d.width()){d.width(f);r=d.width()}if(c>d.height()){d.height(c);s=d.height()}q++});e.eq(b).css({"z-index":3});if(a.timer){d.append('<div class="timer"><span class="mask"><span class="rotator"></span></span><span class="pause"></span></div>');var m=g("div.timer"),n;if(m.length!=0){var A=a.advanceSpeed/180,
t=g("div.timer span.rotator"),w=g("div.timer span.mask"),x=g("div.timer span.pause"),j=0,y,u=function(){n=true;x.removeClass("active");y=setInterval(function(){var c="rotate("+j+"deg)";j+=2;t.css({"-webkit-transform":c,"-moz-transform":c});if(j>180){t.addClass("move");w.addClass("move")}if(j>360){t.removeClass("move");w.removeClass("move");j=0;o("next")}},A)},v=function(){n=false;clearInterval(y);x.addClass("active")};u();m.click(function(){n?v():u()});if(a.startClockOnMouseOut){var z;d.mouseleave(function(){z=
setTimeout(function(){n||u()},a.startClockOnMouseOutAfter)});d.mouseenter(function(){clearTimeout(z)})}}}if(a.directionalNav){d.append('<div class="slider-nav"><span class="right">Right</span><span class="left">Left</span></div>');m=d.children("div.slider-nav").children("span.left");var B=d.children("div.slider-nav").children("span.right");m.click(function(){a.timer&&v();o("prev")});B.click(function(){a.timer&&v();o("next")})}if(a.captions){d.append('<div class="caption"><p></p></div>');var k=d.children("div.caption").children("p"),
l=function(){var c=e.eq(b).attr("title"),f=k.height()+20;if(c!=""){k.text(c);k.parent().stop().animate({bottom:0},a.captionAnimationSpeed)}else k.parent().stop().animate({bottom:-f},a.captionAnimationSpeed)};k.length!=0&&l()}})}})(jQuery);